insert into webguiVersion values ('5.1.0','upgrade',unix_timestamp());
delete from language where languageId=2;
insert into language (languageId,language,characterSet,toolbar) values (2, 'Deutsch (German)', 'ISO-8859-1', 'charcoal');
delete from international where languageId=2 and namespace='WebGUI' and internationalId=611;
insert into international (internationalId,languageId,namespace,message,lastUpdated) values (611,2,'WebGUI','<b>Firmen Name</b><br>\r\nDer Name Ihrer Firma. Er erscheint auf allen Emails und ?berall dort, wo das CompanyName-Macro eingesetzt wird.<br><br>\r\n<b>Firmen Email Adresse</b><br>\r\nEine allgemeine Firmen-Emailadresse. Von dieser Adresse werden alle automatischen Emails versendet. Sie kann auch ?ber das WebGUI-Macrosystem genutzt werden.<br><br>\r\n<b>Firmen URL</b><br>\r\nDie Haupt-URL Ihrer Firma. Diese erscheint auf allen von WebGUI versendeten Emails. Wie schon bei den ersten beiden Funktionen kann auch hier das WebGUI-Macrosystem benutzt werden.', 1043425351);
delete from international where languageId=2 and namespace='WebGUI' and internationalId=616;
insert into international (internationalId,languageId,namespace,message,lastUpdated) values (616,2,'WebGUI','<b>Pfad zu den WebGUI Extras</b><br>\r\nDer Webpfad zum Verzeichnis, dass die WebGUI Grafiken und javascript-Dateien enth?lt<br><br>\r\n<b>Maximale Dateigr??e f?r Anh?nge</b><br>\r\nDiese Einstellung gilt f?r alle Wobjects, die das Hochladen von Dateien und Bildern erlauben (wie z. B. Artikel) Die Gr?sse wird in Kilobytes angegeben.<br><br>\r\n<b>Gr?sse der Vorschaubilder (Thumbnails)</b><br>\r\nDie Gr?sse der l?ngsten Seite einer Grafik. Wenn Sie z. B. den Wert auf 100 setzen und Ihre Grafik ist 400 Pixel hoch und 200 Pixel breit, so wird das Vorschaubild eine H?he von 100 Pixels und eine Breite von 50 Pixels haben.<br><br><i>Beachten Sie:</i> Vorschaubilder werden automatisch generiert, wenn Grafiken hochgeladen/hinzugef?gt werden.<br><br>\r\n<b>Web Pfad f?r die Anh?nge</b><br>\r\nDer Webpfad zum Verzeichnis, in dem Anh?nge gespeichert werden sollen (z.B. /uploads).!  <br><br>\r\n<b>Serverpfad f?r die Anh?nge</b><br>\r\nDer lokale Pfad zum Verzeichnis, in dem die Anh?nge gespeichert werden sollen, z. B. /var/www/public/uploads. Beachten Sie, dass der Webserver gen?gend Rechte hat, um in dieses Verzeichnis speichern zu k?nnen.', 1043425071);
delete from international where languageId=2 and namespace='WebGUI' and internationalId=629;
insert into international (internationalId,languageId,namespace,message,lastUpdated) values (629,2,'WebGUI','<b>Proxy Caching unterbinden</b><br>\r\nEinige Firmen haben Proxy Server im Einsatz, die Probleme mit WebGUI verursachen k?nnen. Wenn Sie solche Problem feststellen, k?nnen Sie die Einstellungen auf \'JA\' setzen. Beachten Sie aber bitte, dass WebGUI\'s URLs nicht mehr so benutzerfreundlich sein werden, wenn dieses Feature aktiviert ist.\r\n<br><br>\r\n<b>Fehlersuche anzeigen</b><br>\r\nWenn dies aktiviert ist, werden erweiterte Meldungen, die lediglich f?r Entwickler oder Administratoren interessant sein k?nnen, angezeigt. Dies ist hilfreich beim L?sen eines Problems<br><br>\r\n<b>Seitenstatistik aktivieren<b><br>\r\nWebGUI kann einige statistische Informationen ?ber ihre Seite speichern. Jedoch wird dadurch die Prozessorbelastung erh?ht und die Datenbank wird etwas gr?sser. Aktivieren Sie dies nur, wenn Sie kein externes WebStatistik-Programm nutzen.', 1043424198);
delete from international where languageId=2 and namespace='WebGUI' and internationalId=630;
insert into international (internationalId,languageId,namespace,message,lastUpdated) values (630,2,'WebGUI','In WebGUI ist eine kleine, aber feine Echt-Zeit Suchmaschine integriert. Wenn Sie diese benutzen m?chten, k?nnen Sie das ^?; Makro nutzen, oder Sie f?gen \'?op=search\' ans Ende einer URL an oder Sie basteln Ihr eigenes Formular.<br><br>Einige Leute ben?tigen eine Suchmaschine, um ihre WebGUI Seite und andere Seiten zu indizieren. Oder sie haben mehr Anforderungen an eine Suchmaschine, als das, was die WebGUI Suchmaschine bietet. In diesen F?llen empfehlen wir <a href=\"http://www.mnogosearch.org/\">MnoGo Search</a> oder <a href=\"http://www.htdig.org/\">ht://Dig</a>.', 1043423742);
delete from international where languageId=2 and namespace='WebGUI' and internationalId=698;
insert into international (internationalId,languageId,namespace,message,lastUpdated) values (698,2,'WebGUI','Karma ist eine Methode, um Benutzeraktivit?ten zu verfolgen und den Benutzer m?glicherweise zu belohnen oder zu \'bestrafen\' f?r den Umfang der Aktivit?ten, die er durchgef?hrt hat. <br><br>Wenn Karma aktiviert ist, beachten Sie, dass bei den Einstellungen von vielen Komponenten in WebGUI Karma-Funktionen hinzugekommen sind (z. B. k?nnen Sie bei Abstimmungen \'Karma pro Abstimmung\' definieren.<br><br>\r\nSie k?nnen nachverfolgen bzw. Karma vergeben, wenn sich ein Benutzer anmeldet und wieviel er zu Ihrer Seite beigetragen hat (wieviele Beitr?ge er verfasst hat, etc.) \r\n<br><br>\r\nUnd Sie k?nnen z. B. je nach Karma-Anzahl Zugriff zu besonderen Bereichen gew?hren.<br><br>\r\nMehr ?ber Karma finden Sie in <a href=\"http://www.plainblack.com/ruling_webgui\">Ruling WebGUI</a>.', 1043423279);
delete from international where languageId=2 and namespace='WebGUI' and internationalId=819;
insert into international (internationalId,languageId,namespace,message,lastUpdated) values (819,2,'WebGUI','kann selbst deaktivieren', 1043422108);
delete from international where languageId=2 and namespace='WebGUI' and internationalId=836;
insert into international (internationalId,languageId,namespace,message,lastUpdated) values (836,2,'WebGUI','Schnipsel sind Text-Elemente, die mehrfach auf Ihrer Seite genutzt werden k?nnen. Dinge wie Java-Scripts, Style Sheets, Flash Animationen oder einfach nur Slogans sind Beispiele hierf?r. Das beste daran ist, dass Sie ?nderungen, die zum Beispiel in einem Slogan oder Werbespruch durchgef?hrt werden m?ssen, an zentraler Stelle ?ndern k?nnen.<br><br>\r\n<b>Name</b><br>Vergeben Sie einen eindeutigen Namen, damit Sie das Schnipsel sp?ter schnell wiederfinden k?nnen.<br><br>\r\n<b>In welches Verzeichnis</b><br>In welchen Ordner m?chten Sie das Schnipsel speichern<br><br>\r\n<b>Schnipsel</b><br>Geben Sie hier den Text ein oder noch einfacher: kopieren Sie den ben?tigten Text oder auch JavaScript-Code ?ber die Zwischenablage ein.', 1043421646);
alter table groups add column ipFilter varchar(255);
insert into international (internationalId,languageId,namespace,message,lastUpdated) values (857,1,'WebGUI','IP Address', 1043878310);
insert into international (internationalId,languageId,namespace,message,lastUpdated) values (861,1,'WebGUI','Make profile public?', 1043879954);
insert into international (internationalId,languageId,namespace,message,lastUpdated) values (860,1,'WebGUI','Make email address public?', 1043879942);
insert into international (internationalId,languageId,namespace,message,lastUpdated) values (859,1,'WebGUI','Signature', 1043879866);
insert into international (internationalId,languageId,namespace,message,lastUpdated) values (858,1,'WebGUI','Alias', 1043879848);
INSERT INTO userProfileField VALUES ('alias','WebGUI::International::get(858)',1,0,'text','','',4,3,0);
INSERT INTO userProfileField VALUES ('signature','WebGUI::International::get(859)',1,0,'HTMLArea','','',5,3,0);
INSERT INTO userProfileField VALUES ('publicProfile','WebGUI::International::get(861)',1,0,'yesNo','','[1]',9,4,0);
INSERT INTO userProfileField VALUES ('publicEmail','WebGUI::International::get(860)',1,0,'yesNo','','[1]',10,4,0);
insert into international (internationalId,languageId,namespace,message,lastUpdated) values (862,1,'WebGUI','This user\'s profile is not public.', 1043881275);
alter table groups add column dateCreated int not null default 997938000;
alter table groups add column lastUpdated int not null default 997938000;
alter table groups add column deleteOffset int not null default 14;
alter table groups add column expireNotifyOffset int not null default -14;
alter table groups add column expireNotifyMessage text;
alter table groups add column expireNotify int not null default 0;
alter table groups change expireAfter expireOffset int not null default 314496000;
insert into international (internationalId,languageId,namespace,message,lastUpdated) values (866,1,'WebGUI','Expire Notifcation Message', 1044127055);
insert into international (internationalId,languageId,namespace,message,lastUpdated) values (865,1,'WebGUI','Notify user about expiration?', 1044126938);
insert into international (internationalId,languageId,namespace,message,lastUpdated) values (864,1,'WebGUI','Expire Notification Offset', 1044126838);
insert into international (internationalId,languageId,namespace,message,lastUpdated) values (863,1,'WebGUI','Delete Offset', 1044126633);
delete from international where languageId=1 and namespace='WebGUI' and internationalId=367;
insert into international (internationalId,languageId,namespace,message,lastUpdated) values (367,1,'WebGUI','Expire Offset', 1044126611);
insert into international (internationalId,languageId,namespace,message,lastUpdated) values (867,1,'WebGUI','Loss of Privilege', 1044133143);
insert into settings values ('sendWelcomeMessage','0');
insert into settings values ('welcomeMessage','Welcome to our site.');
delete from international where languageId=1 and namespace='WebGUI' and internationalId=617;
insert into international (internationalId,languageId,namespace,message,lastUpdated) values (617,1,'WebGUI','Settings are items that allow you to adjust WebGUI to your particular needs.\r\n<p>\r\n\r\n\r\n<b>Edit Company Information</b><br>\r\nInformation specific about the company or individual who controls this installation of WebGUI.\r\n<p>\r\n\r\n\r\n<b>Edit Content Settings</b><br>\r\nSettings related to content and content management.\r\n<p>\r\n\r\n\r\n<b>Edit Messaging Settings</b><br>\r\nSettings concerning email and other related messaging functions.\r\n<p>\r\n\r\n\r\n<b>Edit Miscellaneous Settings</b><br>\r\nAnything we couldn\'t find a place for.\r\n<p>\r\n\r\n\r\n<b>Edit Profile Settings</b><br>\r\nDefine what user profiles look like and what the users have the ability to edit.\r\n<p>\r\n\r\n\r\n<b>Edit User Settings</b><br>\r\nSettings relating to users (beyond profile information), like authentication information, and registration options.\r\n<p>\r\n\r\n\r\n', 1044139325);
delete from international where languageId=1 and namespace='WebGUI' and internationalId=618;
insert into international (internationalId,languageId,namespace,message,lastUpdated) values (618,1,'WebGUI','<b>SMTP Server</b><br>\r\nThis is the address of your local mail server. It is needed for all features that use the Internet email system (such as password recovery).\r\n<p>\r\nOptionally, if you are running a sendmail server on the same machine as WebGUI, you can also specify a path to your sendmail executable. On most Linux systems this can be found at "/usr/lib/sendmail".\r\n\r\n<p>\r\n\r\n<b>Send welcome message?</b><br>\r\nDo you wish to send a message to the user when they register for the site?\r\n<p>\r\n\r\n<b>Welcome Message</b><br>\r\nType the message you wish to send to the user upon registration.\r\n<p>\r\n\r\n<b>Recover Password Message</b><br>\r\nThe message that gets sent to a user when they use the "recover password" function.\r\n<br><br>\r\n\r\n<b>Email Footer</b><br/>\r\nThis footer will be processed for macros and attached to every email sent from this WebGUI instance.\r\n<p/>\r\n\r\n<b>Alert on new user?</b><br>\r\nShould someone be alerted when a new user registers anonymously?\r\n<p>\r\n\r\n<b>Group To Alert On New User</b><br>\r\nWhat group should be alerted when a new user registers?\r\n<p>\r\n\r\n', 1044139289);
delete from international where languageId=1 and namespace='WebGUI' and internationalId=607;
insert into international (internationalId,languageId,namespace,message,lastUpdated) values (607,1,'WebGUI','<b>Anonymous Registration</b><br>\r\nDo you wish visitors to your site to be able to register themselves?\r\n<br><br>\r\n\r\n<b>Run On Registration</b><br>\r\nIf there is a command line specified here, it will be executed each time a user registers anonymously.\r\n<p>\r\n\r\n<b>Enable Karma?</b><br>\r\nShould karma be enabled?\r\n<p>\r\n\r\n<b>Karma Per Login</b><br>\r\nThe amount of karma a user should be given when they log in. This only takes affect if karma is enabled.\r\n<p>\r\n\r\n<b>Session Timeout</b><br>\r\nThe amount of time that a user session remains active (before needing to log in again). This timeout is reset each time a user views a page. Therefore if you set the timeout for 8 hours, a user would have to log in again if s/he hadn\'t visited the site for 8 hours.\r\n<p>\r\n\r\n<b>Authentication Method (default)</b><br>\r\nWhat should the default authentication method be for new accounts that are created? The two available options are WebGUI and LDAP. WebGUI authentication means that the users will authenticate against the username and password stored in the WebGUI database. LDAP authentication means that users will authenticate against an external LDAP server.\r\n<br><br>\r\n<i>Note:</i> Authentication settings can be customized on a per user basis.\r\n<br><br>\r\n\r\n<b>Username Binding</b><br>\r\nBind the WebGUI username to the LDAP Identity. This requires the user to have the same username in WebGUI as they specified during the Anonymous Registration process. It also means that they won\'t be able to change their username later. This only in effect if the user is authenticating against LDAP.\r\n<br><br>\r\n\r\n<b>LDAP URL (default)</b><br>\r\nThe default url to your LDAP server. The LDAP URL takes the form of <b>ldap://[server]:[port]/[base DN]</b>. Example: ldap://ldap.mycompany.com:389/o=MyCompany.\r\n<br><br>\r\n\r\n<b>LDAP Identity</b><br>\r\nThe LDAP Identity is the unique identifier in the LDAP server that the user will be identified against. Often this field is <b>shortname</b>, which takes the form of first initial + last name. Example: jdoe. Therefore if you specify the LDAP identity to be <i>shortname</i> then Jon Doe would enter <i>jdoe</i> during the registration process.\r\n<br><br>\r\n\r\n<b>LDAP Identity Name</b><br>\r\nThe label used to describe the LDAP Identity to the user. For instance, some companies use an LDAP server for their proxy server users to authenticate against. In the documentation or training already provided to their users, the LDAP identity is known as their <i>Web Username</i></b><i>. So you could enter that label here for consitency.\r\n<br><br>\r\n\r\n<b>LDAP Password Name</b><br>\r\nJust as the LDAP Identity Name is a label, so is the LDAP Password Name. Use this label as you would LDAP Identity Name.\r\n<p>\r\n\r\n', 1044139167);
delete from international where languageId=1 and namespace='WebGUI' and internationalId=663;
insert into international (internationalId,languageId,namespace,message,lastUpdated) values (663,1,'WebGUI','Messaging Settings, Edit', 1044138790);
delete from international where languageId=1 and namespace='WebGUI' and internationalId=133;
insert into international (internationalId,languageId,namespace,message,lastUpdated) values (133,1,'WebGUI','Edit Messaging Settings', 1044138764);
insert into international (internationalId,languageId,namespace,message,lastUpdated) values (869,1,'WebGUI','Welcome Message', 1044138730);
insert into international (internationalId,languageId,namespace,message,lastUpdated) values (868,1,'WebGUI','Send welcome message?', 1044138691);
insert into international (internationalId,languageId,namespace,message,lastUpdated) values (870,1,'WebGUI','Welcome', 1044139461);
insert into international (internationalId,languageId,namespace,message,lastUpdated) values (872,1,'WebGUI','Who can view?', 1044218038);
insert into international (internationalId,languageId,namespace,message,lastUpdated) values (871,1,'WebGUI','Who can edit?', 1044218026);
alter table page add groupIdView int(11) not null default 3;
alter table page add groupIdEdit int(11) not null default 3;
update page set groupIdEdit = groupId where groupEdit = 1;
update page set groupIdEdit = 3 where groupEdit = 0;
update page set groupIdView = 7 where worldView = 1;
update page set groupIdView = groupId where worldView = 0 and (groupView = 1 OR groupEdit = 1);
update page set groupIdView = 3 where worldView = 0 and groupView = 0 and groupEdit = 0;
alter table page drop column groupId;
alter table page drop column groupView;
alter table page drop column groupEdit;
alter table page drop column worldView;
alter table page drop column worldEdit;
alter table page drop column ownerView;
alter table page drop column ownerEdit;




